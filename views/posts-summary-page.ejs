<h1 class="margin-bottom center">List o' inl√§gg</h1>

<% if (data.length <= 0) { %>
 <p class="center">(...ljudet av syrsor ekar...)</p>
<% } %>

<div class="blog-posts-list">
  <% data?.forEach(post => { %> <!-- Tag start -->
    <% if (post?.slug) { %> <!-- If statement start -->
      <div class="blog-post-preview">
        <div class="blog-post-preview__header">
          <h2>
            <a href="/posts/<%= post.slug %>"><%= post.title %></a>
          </h2>

          <span> 
            <%= post.createdAt.toLocaleDateString() %>
          </span>
        </div>
        
        <p class="blog-post-preview__body">
          <%= post.description %>
        </p>

        <button class="blog-post-preview__button"> 
          Visa sammanfattning
        </button>
      </div>
    <% } %> <!-- If statement end -->
  <% }); %> <!-- Tag end -->
  
  <!-- Pagination -->
   <!-- TODO: turn into a partial -->
   <div class="pagination">

    <% if (totalPages !== null) { %>
      <%# Will create pages for pagination %>
      <% for( let index = 0; index < totalPages; index++ ) { %>
          <a 
            href="/posts?page=<%= index + 1 %>" 
            class="link-reset <% if (index + 1 === page) { %>
              active
            <% } %>"
          >
            <%= index + 1 %>
          </a>
      <% } %>
    <% } %>
   </div>
</div>